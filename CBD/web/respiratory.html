{% extends "layout.html" %}

{% block title %} 
Respiratory Information
{% endblock %}

{% block main_script %}
<style>
     @import url('https://fonts.googleapis.com/css2?family=Prompt:wght@300;400;500;600&display=swap');
    body {
        font-family: "Prompt", sans-serif;
    }
    .hidden {
        display: none;
    }
    .next {
        margin-top: 15px;
    }
</style>
{% endblock %}

{% block question %}
<div class="container mt-5">
    <h2>Respiratory Information</h2>
    <form method="POST" action="{{ url_for('respiratory_page') }}">
        {{ form.hidden_tag() }}
        <div id="breath" class="form-group">
            {{ form.breath.label }}
            {{ form.breath() }}
            
        </div>
        <div id="to_breath-checkbox" class="form-group hidden">
            {{ form.to_breath.label }}
            {{ form.to_breath() }}
        </div>
        <div id="breathable-checkbox" class="form-group hidden">
            {{ form.breathable.label }}
            {{ form.breathable() }}
        </div>
        <div id="id_15-checkbox" class="form-group hidden">
            {{ form.id_15() }}
            {{ form.id_15.label }}
        </div>
        <div id="b_stuck-checkbox" class="form-group hidden">
            
            {{ form.id_6() }}
            {{ form.id_6.label }}
            <br>
            
            {{ form.id_7() }}
            {{ form.id_7.label }}
            <br>
            
            {{ form.id_8() }}
            {{ form.id_8.label }}
            <br>
            
            {{ form.id_9() }}
            {{ form.id_9.label }}
            <br>
            
            {{ form.id_12() }}
            {{ form.id_12.label }}
            <br>
            
            {{ form.id_14() }}
            {{ form.id_14.label }}
            <br>
            
            {{ form.id_22() }}
            {{ form.id_22.label }}
            <br>
            
            {{ form.id_23() }}
            {{ form.id_23.label }}
            <br>
        </div>
        <div id="loud-checkbox" class="form-group hidden">
            
            {{ form.id_15() }}
            {{ form.id_15.label }}
        </div>
        <div id="swift-checkbox" class="form-group hidden">
            
            {{ form.id_16() }}
            {{ form.id_16.label }}
            <br>
            
            {{ form.id_20() }}
            {{ form.id_20.label }}
            <br>
            
            {{ form.id_5() }}
            {{ form.id_5.label }}
        </div>
        <div class="next">
            <button type="submit" class="btn btn-primary">Next</button>
        </div>
    </form>
</div>
{% endblock %}
    
{% block Q_script %}
<script>
   document.addEventListener('DOMContentLoaded', function () {
        const canbreath = document.querySelector('input[name="breath"][value="canbreath"]');
        const cannotbreath = document.querySelector('input[name="breath"][value="cannotbreath"]');
        const toBreathCheckbox = document.getElementById('to_breath-checkbox');
        const breathableCheckbox = document.getElementById('breathable-checkbox');
        const loud = document.querySelector('input[name="breathable"][value="loud"]');
        const swift = document.querySelector('input[name="breathable"][value="swift"]');
        const stuck = document.querySelector('input[name="breathable"][value="stuck"]');
        const id15Checkbox = document.getElementById('id_15-checkbox');
        const bStuckCheckbox = document.getElementById('b_stuck-checkbox');
        const loudCheckbox = document.getElementById('loud-checkbox');
        const swiftCheckbox = document.getElementById('swift-checkbox');

        function toggleCanbreathCheckboxes() {
            if (canbreath.checked) {
                breathableCheckbox.classList.remove('hidden');
            } else {
                breathableCheckbox.classList.add('hidden');
            }
        }
        
        function toggleCannotbreathCheckboxes() {
            if (cannotbreath.checked) {
                toBreathCheckbox.classList.remove('hidden');
            } else {
                toBreathCheckbox.classList.add('hidden');
            }
        }

        function toggleBreathableSubCheckboxes() {
            if (loud.checked) {
                loudCheckbox.classList.remove('hidden');
            } else {
                loudCheckbox.classList.add('hidden');
            }
            if (swift.checked) {
                swiftCheckbox.classList.remove('hidden');
            } else {
                swiftCheckbox.classList.add('hidden');
            }
            if (stuck.checked) {
                bStuckCheckbox.classList.remove('hidden');
            } else {
                bStuckCheckbox.classList.add('hidden');
            }
        }

        canbreath.addEventListener('change', toggleCanbreathCheckboxes);
        cannotbreath.addEventListener('change', toggleCannotbreathCheckboxes);
        loud.addEventListener('change', toggleBreathableSubCheckboxes);
        swift.addEventListener('change', toggleBreathableSubCheckboxes);
        stuck.addEventListener('change', toggleBreathableSubCheckboxes);

        toggleCanbreathCheckboxes();
        toggleCannotbreathCheckboxes();
        toggleBreathableSubCheckboxes();
    });
</script>
{% endblock %}
